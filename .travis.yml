language: cpp
os:
  osx

jobs:
  include:
    - os: osx
      osx_image: xcode11
      dist: trusty
      env:
        - LDFLAGS="-L/usr/local/opt/llvm/lib"
        - CPPFLAGS="-I/usr/local/opt/llvm/include"
      addons:
        homebrew:
          packages:
            - llvm
            - ninja
            - cmake
            - openssl

script:
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then export CXX=$(brew --prefix llvm)/bin/clang++; fi
  - cmake -DCMAKE_EXPORT_COMPILE_COMMANDS:BOOL=TRUE -DCMAKE_BUILD_TYPE:STRING=Debug -H. -B./build -G "Ninja"
  - cmake --build ./build
